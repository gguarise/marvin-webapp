<div class="container text-center">

    <app-page-header title="Produto"
                     [showSaveButton]="this.formArray.enabled"
                     [showEditButton]="this.formArray.disabled"
                     [showUndoButton]="this.formArray.enabled"
                     (saveEvent)="beforeSave()"
                     (editEvent)="edit()"
                     (undoEvent)="beforeUndo()"></app-page-header>

    <mat-toolbar *ngIf="this.formArray.disabled">
        <mat-icon class="lightgrey-icon"
                  matTooltip="Adicionar Linha">add_circle</mat-icon>
        <mat-icon class="lightgrey-icon"
                  matTooltip="Remover Linhas Selecionadas">delete</mat-icon>
    </mat-toolbar>
    <mat-toolbar *ngIf="this.formArray.enabled">
        <mat-icon class="orange-icon"
                  matTooltip="Adicionar Linha"
                  (click)="addRow()">add_circle</mat-icon>
        <mat-icon class="orange-icon"
                  matTooltip="Remover Linhas Selecionadas"
                  (click)="deleteSelectedRows()">delete</mat-icon>
    </mat-toolbar>

    <div class="table-container"
         [class.mat-elevation-z4]="true">

        <mat-table [dataSource]="dataSource">

            <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
            <mat-row *matRowDef="let row; columns: displayedColumns; let i = index"
                     [class.invalid-table-row]="row.invalid">
            </mat-row>

            <ng-container matColumnDef="select">
                <mat-header-cell fxFlex="60px"
                                 fxLayoutAlign="center center"
                                 *matHeaderCellDef>
                    <mat-checkbox [checked]="allComplete"
                                  [indeterminate]="someComplete()"
                                  (change)="setAll($event.checked)"
                                  [disabled]="this.formArray.disabled">
                    </mat-checkbox>
                </mat-header-cell>
                <mat-cell fxFlex="60px"
                          fxLayoutAlign="center center"
                          *matCellDef="let element"
                          [formGroup]="element">
                    <mat-checkbox formControlName="select">
                    </mat-checkbox>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="nome">
                <mat-header-cell fxFlex
                                 fxLayoutAlign="center center"
                                 *matHeaderCellDef> Nome </mat-header-cell>
                <mat-cell fxFlex
                          fxLayoutAlign="center center"
                          *matCellDef="let element"
                          [formGroup]="element">
                    <mat-form-field fxFlex
                                    fxLayout="column">
                        <input matInput
                               formControlName="nome" />
                        <mat-error *ngIf="element.get('nome').invalid">{{getErrorMessage(element.get('nome'))}}
                        </mat-error>
                    </mat-form-field>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="tipo">
                <mat-header-cell fxFlex
                                 fxLayoutAlign="center center"
                                 *matHeaderCellDef> Tipo </mat-header-cell>
                <mat-cell fxFlex
                          fxLayoutAlign="center center"
                          *matCellDef="let element"
                          [formGroup]="element">
                    <mat-form-field fxFlex
                                    fxLayout="column">
                        <input matInput
                               formControlName="tipo">
                        <mat-error *ngIf="element.get('tipo').invalid">{{getErrorMessage(element.get('tipo'))}}
                        </mat-error>
                    </mat-form-field>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="descricao">
                <mat-header-cell fxFlex
                                 fxLayoutAlign="center center"
                                 *matHeaderCellDef> Descrição </mat-header-cell>
                <mat-cell fxFlex
                          fxLayoutAlign="center center"
                          *matCellDef="let element"
                          [formGroup]="element">
                    <mat-form-field fxFlex
                                    fxLayout="column">
                        <input matInput
                               formControlName="descricao">
                        <mat-error *ngIf="element.get('descricao').invalid">
                            {{getErrorMessage(element.get('descricao'))}}
                        </mat-error>
                    </mat-form-field>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="quantidadeEstoque">
                <mat-header-cell fxFlex="12"
                                 fxLayoutAlign="center center"
                                 *matHeaderCellDef> Qtde. Estoque </mat-header-cell>
                <mat-cell fxFlex="12"
                          fxLayoutAlign="center center"
                          *matCellDef="let element"
                          [formGroup]="element">
                    <mat-form-field fxFlex
                                    fxLayout="column">
                        <input matInput
                               formControlName="quantidadeEstoque"
                               type="number" />
                        <mat-error *ngIf="element.get('quantidadeEstoque').invalid">
                            {{getErrorMessage(element.get('quantidadeEstoque'))}}</mat-error>
                    </mat-form-field>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="valorUnitario">
                <mat-header-cell fxFlex="15"
                                 fxLayoutAlign="center center"
                                 *matHeaderCellDef> Valor Unitário </mat-header-cell>
                <mat-cell fxFlex="15"
                          fxLayoutAlign="center center"
                          *matCellDef="let element"
                          [formGroup]="element">
                    <mat-form-field fxFlex
                                    fxLayout="column">
                        <input matInput
                               formControlName="valorUnitario" />
                        <mat-error *ngIf="element.get('valorUnitario').invalid">
                            {{getErrorMessage(element.get('valorUnitario'))}}
                        </mat-error>
                    </mat-form-field>
                </mat-cell>
            </ng-container>

            <ng-container matColumnDef="valorCobrado">
                <mat-header-cell fxFlex="15"
                                 fxLayoutAlign="center center"
                                 *matHeaderCellDef> Valor Cobrado </mat-header-cell>
                <mat-cell fxFlex="15"
                          fxLayoutAlign="center center"
                          *matCellDef="let element"
                          [formGroup]="element">
                    <mat-form-field fxFlex
                                    fxLayout="column">
                        <input matInput
                               formControlName="valorCobrado" />
                        <mat-error *ngIf="element.get('valorCobrado').invalid">
                            {{getErrorMessage(element.get('valorCobrado'))}}
                        </mat-error>
                    </mat-form-field>
                </mat-cell>
            </ng-container>



            <!-- <ng-container matColumnDef="email">
            <mat-header-cell fxFlex
                             fxLayoutAlign="center center"
                             *matHeaderCellDef> E-mail </mat-header-cell>
            <mat-cell fxFlex
                      fxLayoutAlign="center center"
                      *matCellDef="let element"
                      [formGroup]="element">
                <mat-form-field fxFlex
                                fxLayout="column">
                    <input matInput
                           formControlName="email" />
                    <mat-error *ngIf="element.get('email').invalid">{{getErrorMessage(element.get('email'))}}
                    </mat-error>
                </mat-form-field>
            </mat-cell>
        </ng-container>
 -->

        </mat-table>
    </div>
</div>