<div class="container text-center">

    <app-page-header title="Fornecedor"
                     [showSaveButton]="this.formArray.enabled"
                     [showEditButton]="this.formArray.disabled"
                     [showUndoButton]="this.formArray.enabled"
                     (saveEvent)="beforeSave()"
                     (editEvent)="edit()"
                     (undoEvent)="undo()"></app-page-header>

    <mat-toolbar *ngIf="this.formArray.disabled">
        <mat-icon class="lightgrey-icon"
                  matTooltip="Adicionar Linha">add_circle</mat-icon>
        <mat-icon class="lightgrey-icon"
                  matTooltip="Remover Linhas Selecionadas">delete</mat-icon>
    </mat-toolbar>
    <mat-toolbar *ngIf="this.formArray.enabled">
        <mat-icon class="orange-icon"
                  matTooltip="Adicionar Linha"
                  (click)="addRow()">add_circle</mat-icon>
        <mat-icon class="orange-icon"
                  matTooltip="Remover Linhas Selecionadas"
                  (click)="deleteSelectedRows()">delete</mat-icon>
    </mat-toolbar>

    <mat-table [dataSource]="dataSource"
               class="my-table mat-elevation-z4">

        <mat-header-row *matHeaderRowDef="displayedColumns"></mat-header-row>
        <mat-row *matRowDef="let row; columns: displayedColumns; let i = index">
        </mat-row>

        <ng-container matColumnDef="select">
            <mat-header-cell fxFlex="60px"
                             fxLayoutAlign="start center"
                             *matHeaderCellDef>
                <mat-checkbox [disabled]="this.formArray.disabled">
                </mat-checkbox>
            </mat-header-cell>
            <mat-cell fxFlex="60px"
                      fxLayoutAlign="start center"
                      *matCellDef="let element"
                      [formGroup]="element">
                <mat-checkbox formControlName="select">
                </mat-checkbox>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="nome">
            <mat-header-cell fxFlex
                             fxLayoutAlign="start center"
                             *matHeaderCellDef> Nome </mat-header-cell>
            <mat-cell fxFlex
                      fxLayoutAlign="start center"
                      *matCellDef="let element"
                      [formGroup]="element">
                <mat-form-field fxFlex
                                fxLayout="column">
                    <input matInput
                           formControlName="nome" />
                </mat-form-field>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="cnpj">
            <mat-header-cell fxFlex
                             fxLayoutAlign="start center"
                             *matHeaderCellDef> CNPJ </mat-header-cell>
            <mat-cell fxFlex
                      fxLayoutAlign="start center"
                      *matCellDef="let element"
                      [formGroup]="element">
                <mat-form-field fxFlex
                                fxLayout="column">
                    <input matInput
                           formControlName="cnpj" />
                </mat-form-field>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="telefone">
            <mat-header-cell fxFlex
                             fxLayoutAlign="start center"
                             *matHeaderCellDef> Telefone </mat-header-cell>
            <mat-cell fxFlex
                      fxLayoutAlign="start center"
                      *matCellDef="let element"
                      [formGroup]="element">
                <mat-form-field fxFlex
                                fxLayout="column">
                    <input matInput
                           formControlName="telefone" />
                </mat-form-field>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="email">
            <mat-header-cell fxFlex
                             fxLayoutAlign="start center"
                             *matHeaderCellDef> E-mail </mat-header-cell>
            <mat-cell fxFlex
                      fxLayoutAlign="start center"
                      *matCellDef="let element"
                      [formGroup]="element">
                <mat-form-field fxFlex
                                fxLayout="column">
                    <input matInput
                           formControlName="email" />
                </mat-form-field>
            </mat-cell>
        </ng-container>

        <ng-container matColumnDef="tipo">
            <mat-header-cell fxFlex
                             fxLayoutAlign="start center"
                             *matHeaderCellDef> Tipo </mat-header-cell>
            <mat-cell fxFlex
                      fxLayoutAlign="start center"
                      *matCellDef="let element"
                      [formGroup]="element">
                <mat-form-field fxFlex
                                fxLayout="column">
                    <input matInput
                           formControlName="tipo">
                </mat-form-field>
            </mat-cell>
        </ng-container>

    </mat-table>

</div>